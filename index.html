<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora Fornalha</title>
  <link rel="stylesheet" href="reset.css">
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #222;
    }

    .scene {
      perspective: 24000px;
      /* controla a profundidade da cena */
    }

    .fornalha {
      width: 400px;
      height: 400px;
      position: relative;
      transform-style: preserve-3d;
      /* rotação contínua */
    }

    .fornalha>div {
      position: absolute;
      width: 400px;
      height: 400px;
      border: 2px solid #111;
    }

    .front {
      display: flex;
      background-image: url('./fornalha/frente.webp');
      background-size: cover;
      transform: rotateY(0deg) translateZ(200px);
      flex-direction: column;

    }

    .front>div {
      width: 100%;
    }

    .entrada {
      display: flex;
      justify-content: center;
      align-items: end;
      height: 175px;
    }

    .saida {
      display: flex;
      justify-content: center;
      align-items: end;
      height: 225px;
    }

    .display {
      width: 90px;
      height: 90px;

      display: flex;
      justify-content: end;
      align-items: end;

      background-size: cover;

      border: 0px solid gray;
      margin-bottom: 1px;
    }

    .entrada .display {
      background-image: url("./carne.png");

      background-position-y: -40px;
    }

    .saida .display {
      background-image: url("./carvao.png");
    }

    .front>div .display:hover {
      border: 1px solid white;
      margin-bottom: 1px;
    }

    .front>div .display .inputs {
      display: flex;
      width: 100%;
      justify-content: end;
    }

    .front>div .display .inputs input {
      width: 50%;
      opacity: 0.4;
    }

    .front>div .display:hover .inputs input {
      opacity: 1;
    }

    .back {
      transform: rotateY(180deg) translateZ(200px);
    }

    .right {
      transform: rotateY(90deg) translateZ(200px);
    }

    .left {
      transform: rotateY(-90deg) translateZ(200px);
    }

    .back,
    .right,
    .left {
      background-image: url("./fornalha/laterais.jpeg");
      background-size: cover;
    }

    .top {
      transform: rotateX(90deg) translateZ(200px);
    }

    .bottom {
      transform: rotateX(-90deg) translateZ(200px);
    }

    .top,
    .bottom {
      background-image: url("./fornalha/polos.jpeg");
      background-size: cover;
    }

    /* animação 3D */
  </style>
</head>

<body>
  <div class="scene">
    <div class="fornalha" id="fornalha">
      <div class="front">
        <div class="entrada">
          <div class="display">
            <div class="inputs">
              <input type="number" name="" id="">
            </div>
          </div>
        </div>

        <div class="saida">
          <div class="display">
            <div class="inputs">
              <input type="number" name="" id="">
            </div>
          </div>
        </div>
      </div>
      <div class="back"></div>
      <div class="right"></div>
      <div class="left"></div>
      <div class="top"></div>
      <div class="bottom"></div>
    </div>
  </div>

  <script>
    const box = document.getElementById('fornalha');

    let dragging = false;
    let lastX = 0, lastY = 0;
    let rotX = -20, rotY = 20;
    let velX = 0, velY = 0; // velocidade (para inércia)

    // clamp para limitar o X
    const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

    // normalizar ângulos
    const normalize = (deg) => ((deg % 360) + 360) % 360;

    // loop de animação
    function animate() {
      if (!dragging) {
        // aplica atrito na inércia
        velX *= 0.95;
        velY *= 0.95;
        rotX += velY;
        rotY += velX;
        if (Math.abs(velX) < 0.01) velX = 0;
        if (Math.abs(velY) < 0.01) velY = 0;
      }
      // limitar X e normalizar Y
      rotX = clamp(rotX, -90, 90);
      rotY = normalize(rotY);

      box.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;

      requestAnimationFrame(animate);
    }

    // eventos de mouse
    document.addEventListener('mousedown', (e) => {
      dragging = true;
      lastX = e.clientX;
      lastY = e.clientY;
    });

    document.addEventListener('mouseup', () => {
      dragging = false;
    });

    document.addEventListener('mousemove', (e) => {
      if (!dragging) return;
      const dx = e.clientX - lastX;
      const dy = e.clientY - lastY;
      lastX = e.clientX;
      lastY = e.clientY;
      rotY += dx * 0.3;
      rotX -= dy * 0.3;
      velX = dx * 0.05; // quanto maior o movimento, mais inércia
      velY = -dy * 0.05;
    });

    // eventos de touch (mobile)
    document.addEventListener('touchstart', (e) => {
      const t = e.touches[0];
      dragging = true;
      lastX = t.clientX;
      lastY = t.clientY;
    }, { passive: true });

    document.addEventListener('touchend', () => {
      dragging = false;
    });

    document.addEventListener('touchmove', (e) => {
      if (!dragging) return;
      const t = e.touches[0];
      const dx = t.clientX - lastX;
      const dy = t.clientY - lastY;
      lastX = t.clientX;
      lastY = t.clientY;
      rotY += dx * 0.3;
      rotX -= dy * 0.3;
      velX = dx * 0.05;
      velY = -dy * 0.05;
    }, { passive: true });

    // inicia animação
    animate();
  </script>
</body>

</html>